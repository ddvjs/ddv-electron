#!/usr/bin/env node
'use strict'
// 标题
process.title = 'ddvElectronBin'
const argv = require('../lib/argv')
const logger = require('../lib/logger')
const buildElectron = require('../lib/build')
const runElectronProcess = require('../lib/runElectronProcess')

logger.log(`cmd ${argv.cmd}`)
logger.log(`port ${argv.port}`)
logger.log(`isDev ${argv.dev}`)
logger.log(`analyze ${argv.analyze}`)
logger.log(`root-dir ${argv['root-dir']}`)
logger.log(`config-file ${argv['config-file']}`)
// 调试模式
process.env.NODE_ENV = argv.dev ? 'development' : 'production'
// 编译模式
if (argv.cmd === 'build') {
  logger.log('[nuxt] Building...') // eslint-disable-line no-console
  buildElectron()
} else if (argv.cmd === 'dev' || argv.cmd === 'start') {
  runElectronProcess()
} else {
  logger.error('This parameter is not supported')
  process.exit(1)
}
